= Virtual Satellite 4 Core: User Manual
:imagesdir: images
:title-logo-image: images/title/VirtualSatellite_Modelling_4k.jpg
:toc:
:experimental:  

[quote, Philipp M. Fischer]
It has been a long way to get here and it will be an even harder way to go on. Thanks to everyone who contributed so far.

:sectnums:

== Getting Started

Learn about basic requirements of Virtual Satellite, how it is installed and begin your first modeling. It probably takes less than 15 minutes until you have your first item modeled.  

=== System Requirements 

Virtual Satellite is based on Java and Eclipse Technology. It currently supports the following operating system configurations

. Windows 7 64bit with Java 8 runtime environment
. Linux 64 bit with Java 8 runtime environment

[WARNING] 
.Linux compilation issues
==== 
Some dependencies to C and C++ libraries are build on a Suse Linux Enterprise Distribution (SLED). A re-compilation when using other distributions is probably needed. This concerns e.g. the visualization functionality based on the Visualization Toolkit (VTK).
====

=== Installation

Installing Virtual Satellite is as easy as possible. Provided that a Java Runtime environment is installed to your system. Follow the steps below to install Virtual Satellite on a windows system: 

NOTE: Installation steps on linux are very similar.

{counter2:step:0}
[%header,cols=">8,62a,40a"] 
|===

|Step
|Task
|Image

|{counter:step}.
|Download the Virtual Satellite zip-file from the GitHub releases section.
|image:chapterInstallation/DownloadGitHubRelease.png[Download]

|{counter:step}.
|Store the zip file to the folder of your choice (e.g.: `C:\VirtualSatellite\`) and unzip it here.
|image:chapterInstallation/UnZip.png[Unzip]

|{counter:step}.
|Dive into the unzipped sub-folder and Execute the `VirSat4_Core.exe` file.
|image:chapterInstallation/Execute.png[Execute]

|{counter:step}.
|Once Virtual Satellite is started it should appear as shown in the image. Now press the link btn:[Start modeling now!].
|image:chapterInstallation/VirtualSatelliteStarted.png[Started]

|===

Done. You installed and successfully started Virtual Satellite.

=== First Steps

Now where you successfully installed Virtual Satellite to your computer it is about time to get started using it. This chapter provides some first steps to learn some basic functionality to work with this software.

NOTE: In this example we work locally on your computer, there is no need for a subversion service or similar. 

:step: 0
[%header,cols=">8,62a,40a"] 
|===

|Step
|Task
|Image

|{counter:step}.
|Dive into the folder where you installed Virtual Satellite and and Execute the `VirSat4_Core.exe` file.
|image:chapterFirstSteps/Execute.png[Execute]

|{counter:step}.
|The OSGI Console will open up and a Splash screen will be displayed showing the start-up progress.

NOTE: Details to the Equinox OSGI Console will be explained later in chapter <<Equinox OSGI Console>>.
|image:chapterFirstSteps/SplashAndOSGI.png[Splash Screen and OSGI Console]

|{counter:step}.
|During start-up, Virtual Satellite will ask for the workspace folder. Choose a folder you prefer or stick with the default one. This workspace folder is used to store the files of your project locally. 

NOTE: You can also choose different folders for different projects. And you can change between these folders later.
|image:chapterFirstSteps/ChooseWorkspace.png[Execute]

|{counter:step}.
|After a while you will see the _Welcome Screen_ of Virtual Satellite, Press the link btn:[Start Modelling now!]. This will open the Virtual Satellite _perspective_. 

NOTE: In case you don't see the _Welcome Screen_ as shown in the image, it is possible that you already started Virtual Satellite and closed it. To open the _Welcome Screen_ again open the menu:Help[Welcome].
|image:chapterFirstSteps/VirtualSatelliteStarted.png[Started]

|{counter:step}.
|The three important _views_ of the _perspective_ are:

. The _Navigator_ to the left (blue dashed box).
. The _Editing_ area in the middle which is currently empty (green dashed box).
. the _Concept Palette_ to the right (orange dashed box).

NOTE: In case _views_ get lost, you can always reset the _perspective_ by right-click image:chapterFirstSteps/BtnCorePerspective.png[Icon Core Perspective] then menu:Context[Reset] 
|image:chapterFirstSteps/Perspective.png[Perspective]

|{counter:step}.
|Open the dialog for creating a new project by pressing the marked icon in the _navigator_. 

NOTE: Alternatively you can the _new_ dialog from the main-menu following menu:File[New > Other...] or kbd:[CTRL+N]. Then from the _new_ dialog select menu:VirSat[VirSat Project] and press btn:[Next>].
|image:chapterFirstSteps/BtnOpenProject.png[Open project]

|{counter:step}.
|In the _New Project_ dialog type in a name for your project (e.g. `MySatellite`). Press btn:[Finish] to create the new project. 
|image:chapterFirstSteps/NewProjectDialog.png[New Project Dialog]

|{counter:step}.
|Now open the _Repository_ from the _Navigator_ view by double-clicking menu:MySatellite[Repository]. 
|image:chapterFirstSteps/OpenRepository.png[New Project Dialog]

|{counter:step}.
|The _Repository Editor_ will open in the _Editing_ area. Scroll down to the _table Section for: Active Concepts_. Here click on btn:[Add from Registry]. 
|image:chapterFirstSteps/RepositoryEditor.png[New Project Dialog]

|{counter:step}.
|Select the following two _Concepts_ in the dialog by ticking the check-box. Then press btn:[OK] to activate the _Concepts_. 

. The _Concept_ for Product Structures _de.dlr.sc.virsat.model.extension.ps_.
. The _Concept_ for Design Maturity _de.dlr.sc.virsat.model.extension.maturity_.

NOTE: The numbers in the brackets after the _Concept_ name denote the version of the _Concept_.

NOTE: _Concepts_ can refer to each other. E.g. the Design Maturity _Concept_ requires the Product Structures _Concept_. In case you only pick the second one, Virtual Satellite will automatically activate all required ones as well.

|image:chapterFirstSteps/ConceptDialog.png[Concept Dialog]

|{counter:step}.
|Go back to the _Navigator_ view and right-click on _Repository_. Now select menu:Context[Product Structures > Add ProductTree]. 
|image:chapterFirstSteps/CreateProductTree.png[Create Product Tree]

|{counter:step}.
|Now right-click on the newly generated item _PT: ProductTree_. Now select menu:Context[Product Structures > Add ProductTreeDomain]. 
|image:chapterFirstSteps/productTreeDomain.png[Create Product Tree Domain]

|{counter:step}.
|Double-click on the newly generated _PTD: ProductTreeDomain_ item to open it in the _Editor_. In the Editor change the name to e.g. `AOCS` (Attitude and Orbit Control System) as shown in the image.

NOTE: The ribbon tab of the _Editor_ changes from "PTD: ..." to "+*PTD: ...". The extra *+ shows that there are unsaved changes.

TIP: Save your work frequently since most changes are kept in memory and not on your hard-drive. You can easily save your work by pressing kbd:[CTRL+S] from within the current _Editor_ or by menu:File[Save]. You should use kbd:[CTRL+SHIFT+S] or menuFile:[Save All] to save all _Editors_ and chnages.
|image:chapterFirstSteps/ProductTreeDomainEditor.png[Product Tree Domain Editor]

|{counter:step}.
|Create an _Element Definition_ in the _PTD: AOCS_ similar as in the steps before. Name it `RW` (Reaction Wheel).

TIP: You can also use the _Concept Pallete_ and *drag* the _Element Definition_ item to the _PTD: AOCS_ in the _Navigator_ *and drop* it.
|image:chapterFirstSteps/AddedElementDefinition.png[Added Element Definition]

|{counter:step}.
|After modeling the _Structural Element Instances_ it is now time to add some design information. Go back to the _Navigator_ view and right-click on the newly created _ED: RW_. Select menu:Context[Design Maturity > Add Maturity]. After this double-click on the _ED: RW_ to open it in the _Editor_.

TIP: The whole _Conceptual Data Model_ (CDM) is based on _Structural Elements_ and _Category Definitions_. At runtime the _CDM_ is used to create the _System Model_. Now _Structural Element Instances_ and _Category Assignments_ are instantiated.   
|image:chapterFirstSteps/AddMaturity.png[Add Maturity]

|{counter:step}.
|In the editor scroll-down to _Section for: Maturity_. Click into the upper table to change the level _Enum Property_ to `READY_TO_BE_USED=1` and the trl _Enum Property_ to `TRL_9=9`.  

NOTE: Opening the _Editor_ on the _Structural Element Instance_ gives access to all _Category Assignments_. Double-clicking an individual _Category Assignment_ in the _Navigator_ opens and individual _Editor_ for it. You can also open this individual _Editor_ by selecting the _Category Assignment_ in the table in the _Editor_ and press btn:[Drill-Down].
|image:chapterFirstSteps/EditorMaturity.png[Maturity Editor]

|===

Well Done. You successfully created your very first model using Virtual Satellite. With this first hands-on experience you learned the first important steps to use this software. Continue reading the next chapters to learn how to use it in real system engineering scenarios. 

== Setting up the infrastructure

TBD

=== Architecture Overview

TBD

=== Sharing and committing a new project

TBD

=== Loading and updating from a shared project

TBD

== Modeling with Virtual Satellite


Learn here about the out of the box available modeling capabilities supported by Virtual Satellite.
In this chapter you will learn about concepts, how to work with them, how to interact with the data model,
and which default concepts are delivered to you by the Core. 

=== General modeling

Virtual Satellite supplies a core modeling language. 
Amongst other advanced capabilities, it allows storing various peripheral information such as user rights and unit management.
The modeling language can be extended by _concepts_, which represent specific engineering processes or knowledge domains.

NOTE: For example activating the _de.dlr.sc.virsat.model.extension.ps_ concept extends the modeling language by allowing modeling of complex product structures including product trees and product configurations.

==== User Rights Management

Having multiple users manipulate the data model concurrently may lead to merge conflicts.
To avoid such issues, Virtual Satellite provides a rights management system.
It defines which user is allowed to manipulate a certain model element.
The association between a user and the modifiable elements is called a _Discipline_. +
A _Discipline_ can be assigned a user name and likewise model elements can be assigned a _Discipline_.
Then only users logged in with that specified user name are allowed to modify those elements.
Disciplines are managed in the _Role Management_.
By default when a new project is created, the _Role Management_ will contain exactly one _Discipline_ called *System*.

In this section you will learn how to:

* Create a new Discipline
* Assign a Discipline to a model element

:step: 0
[%header,cols=">8,62a,40a"] 
|===

|Step
|Task
|Image

|{counter:step}.
|Open the _Editor_ for the _Role Management_ from the _Navigator_ view by double-clicking menu:MySatellite[Role Management]. 
|image:chapterModeling/OpenRoleManagement.png[Opening the role management editor]

|{counter:step}.
|Press the button *Add Discipline* to insert a new _Discipline_ called _New Discipline_ and that is initially associated with your own user name.

TIP: _Disciplines_ can be removed by selecting a _Discipline_ and then pressing the *Remove Discipline* button.

|image:chapterModeling/AddDiscipline.png[Adding a discpline]

|{counter:step}.
|Select the newly created _Discipline_ in the _Discipline Name_ column and change it to *RepositoryManager*.
Then select the _Discipline_ in the _User Name_ column and change it to *OtherUsername*.

|image:chapterModeling/EditUserName.png[Changing properties of a Discipline]

|{counter:step}.
|We will now assign the discipline to the _Repository_. 
To do this, open the _Repository_ from the _Navigator_.
Then select the combo box listing *Discipline: System* and choose the entry *Discipline: RepositoryManagener*.
Finally press the button *Assign Discipline* button.

TIP: You can assign a _Discipline_ to an element and all sub elements by pressing the *Assign Discipline Recursive* button.

|image:chapterModeling/AssignDiscipline.png[Assigning a Discipline]

|{counter:step}.
|All editable fields will be no longer be editable and shown as greyed out.

WARNING: This includes the _Discipline_ field. 
Once you assign a _Discipline_ only the associated user can return the ownership!

|image:chapterModeling/Uneditable.png[The repository can longer be edited]

|===

TIP: In the event that the rights management needs to be bypassed,
Virtual Satellite can be started with the -superUser flag to gain super user rights.

==== Quantities, Units, Dimensions and Values

Values without a physical dimension carry little meaning. 
They need to be considered within their engineering context, 

NOTE: For example the statement "the mass is 5" is ambiguous and not meaningful.
However, the information "the mass is 5kg" is something that can be worked with.

To establish a solid foundation for well-defined and consistent unities,
Virtual Satellite provides an implementation of the  Quantities, Units, Dimensions and Values (QUDV)

In this section you will learn how to:

* Create a new Quantity Kind
* Create a new Unit
* Assign a unit to a engineering property
* Export a QUDV Model
* Import a QUDV Model

===== Unit Management

:step: 0
[%header,cols=">8,62a,40a"] 
|===

|Step
|Task
|Image

|{counter:step}.
|Open the _Editor_ for the _Unit Management_ from the _Navigator_ view by double-clicking menu:MySatellite[Unit Management]. 
|image:chapterModeling/OpenUnitManagement.png[Opening the unit management editor]

|===

===== Assigning Units

TBD

===== QUDV Wizard

TBD

=== Modeling Concepts

Virtual Satellite provides an extension mechanism to customize the core modeling language to project-specific needs. Concepts allow creating new types that can be used in Virtual Satellite models. Virtual Satellite ships basic concepts to a model systems, such as the Concept _de.dlr.sc.virsat.model.extension.ps_, enabling to model complex product structures. 

NOTE: To create your own Concepts see Section <<Developing a Concept>>.

==== Activating a Concept

To activate Concepts, it is necessary to have a Virtual Satellite project. Such a project can be created by clicking the satellite icon in the VirSat Navigator or by right-clicking New > Project then select the folder _VirSat_ and select _VirSat Project_.

Once you have a Virtual Satellite Project (in this documentation called MySatellite) follow the next steps to activate Concepts:

:step: 0
[%header,cols=">8,62a,40a"] 
|===

|Step
|Task
|Image

|{counter:step}.
|Open the editor for the _Repository_ from the navigator view by double-clicking menu:MySatellite[Repository]. 
|image:chapterModeling/OpenRepository.png[Opening the repository editor]

|{counter:step}.
|The _Repository Editor_ will open in the _Editing_ area. Scroll down to the _table Section for: Active Concepts_. Here click on btn:[Add from Registry]. 
|image:chapterModeling/RepositoryEditor.png[Select concept to activate]

|{counter:step}.
|Select the Concept to be activated and press the _OK_ button.
|

|===

The concept is now activated.

==== Modeling with the concept palette

TBD

==== Extended product structures - Inheritance and Configuration Control

TBD

==== Product mass summaries

TBD

=== Advanced Modeling

TBD

==== Adjusting Calculations

TBD

==== Using Apps

TBD

==== Developing a Concept

TBD

== Advanced Functionality

TBD

=== Enforce user rights

TBD

=== Enforce super user rights

TBD

=== Equinox OSGI Console

TBD

[colophone]
== License & Copyright

|===
| Product Version:      | {revnumber}
| Build Date Qualifier: | {revdate}
| Travis CI Job Number: | {buildnr}
|=== 

Copyright (c) 2008-2019 DLR (German Aerospace Center),
Simulation and Software Technology.
Lilienthalplatz 7, 38108 Braunschweig, Germany

This program and the accompanying materials are made available under the terms of the Eclipse Public License 2.0 which is available at https://www.eclipse.org/legal/epl-2.0/ . A copy of the license is shipped with the Virtual Satellite software product.
